<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Theatre Book
    </title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }


        #theatre {
            border: 2px solid rgb(208, 255, 0);
            width: 100%;
            /* margin: 10rem; */
            box-shadow: px 0px 10px rgb(255, 240, 32);

        }


        .bg-success {
            background-color: green;
        }

        .bg-danger {
            background-color: red;
        }



        .seat {
            height: 1rem;
            width: 1rem;
            padding: 0.5rem;
            border: 2px solid black;
            border-top-left-radius: 10px;
            border-top-right-radius: 10px;
            position: relative;

        }

        .seat_row {
            width: 100%;
        }

        #screen {
            border: 2px solid red;
            padding: 1rem 5rem;
            font-size: 2rem;
            box-shadow: 0px 0px 10px grey;
            margin: auto;
            /* display: flex; */
            /* align-self: center; */
        }

        html {
            font-size: 16px;
        }

        @media (max-width:1220px) {

            html {
                font-size: 14px;
            }
        }

        @media (max-width:1097px) {

            html {
                font-size: 12px;
            }
        }

        @media (max-width:980px) {

            html {
                font-size: 8px;
            }
        }

        @media (max-width:700px) {

            html {
                font-size: 6px;
            }


        }
    </style>
</head>

<body>
    <select name="" id="tt" value="100" class="form-control">
        <option value="100" id="movie_1" selected>Movie 1</option>
        <option value="150" id="movie_2">Movie 2</option>
        <option value="200" id="movie_3">Movie 3</option>
    </select>
    <div class="tt">
        <div id="screen" class="col-sm-6 offset-sm-4">Screen Is Here</div>
    </div>

    <!-- <di"> -->
    <div id="theatre" class="">
        <div class="row d-flex m-auto">
            <div id="rows_1" class="seat_row d-flex flex-wrap  justify-content-between">
                <div class="seat m-3" id="seat_1" value="1"></div>
                <div class="seat m-3" id="seat_2" value="2"></div>
                <div class="seat m-3" id="seat_3" value="3"></div>
                <div class="seat m-3" id="seat_4" value="4"></div>
                <div class="seat m-3" id="seat_5" value="5"></div>
                <div class="seat m-3" id="seat_6" value="6"></div>
                <div class="seat m-3" id="seat_7" value="7"></div>
                <div class="seat m-3" id="seat_8" value="8"></div>
                <div class="seat m-3" id="seat_9" value="9"></div>
                <div class="seat m-3" id="seat_10" value="10"></div>
                <div class=" seat m-3" id="seat_11" value="11"></div>
                <div class=" seat m-3" id="seat_12" value="12"></div>
            </div>
            <div id=" rows_2" class="seat_row d-flex flex-wrap justify-content-between">
                <div class="seat m-3" id="seat_13" value="13"></div>
                <div class="seat m-3" id="seat_14" value="14"></div>
                <div class="seat m-3" id="seat_15" value="15"></div>
                <div class="seat m-3" id="seat_16" value="16"></div>
                <div class="seat m-3" id="seat_17" value="17"></div>
                <div class="seat m-3" id="seat_18" value="18"></div>
                <div class="seat m-3" id="seat_19" value="19"></div>
                <div class="seat m-3" id="seat_20" value="20"></div>
                <div class="seat m-3" id="seat_21" value="21"></div>
                <div class="seat m-3" id="seat_22" value="22"></div>
                <div class="seat m-3" id="seat_23" value="23"></div>
                <div class="seat m-3" id="seat_24" value="24"></div>
            </div>
            <div id=" rows_3" class="seat_row d-flex flex-wrap justify-content-between">
                <div class="seat m-3" id="seat_25" value="25"></div>
                <div class="seat m-3" id="seat_26" value="26"></div>
                <div class="seat m-3" id="seat_27" value="27"></div>
                <div class="seat m-3" id="seat_28" value="28"></div>
                <div class="seat m-3" id="seat_29" value="29"></div>
                <div class="seat m-3" id="seat_30" value="30"></div>
                <div class="seat m-3" id="seat_31" value="31"></div>
                <div class="seat m-3" id="seat_32" value="32"></div>
                <div class="seat m-3" id="seat_33" value="33"></div>
                <div class="seat m-3" id="seat_34" value="34"></div>
                <div class="seat m-3" id="seat_35" value="35"></div>
                <div class="seat m-3" id="seat_36" value="36"></div>
            </div>
            <div id=" rows_4" class="seat_row d-flex flex-wrap justify-content-between">
                <div class="seat m-3" id="seat_37" value="37"></div>
                <div class="seat m-3" id="seat_38" value="38"></div>
                <div class="seat m-3" id="seat_39" value="39"></div>
                <div class="seat m-3" id="seat_40" value="40"></div>
                <div class="seat m-3" id="seat_41" value="41"></div>
                <div class="seat m-3" id="seat_42" value="42"></div>
                <div class="seat m-3" id="seat_43" value="43"></div>
                <div class="seat m-3" id="seat_44" value="44"></div>
                <div class="seat m-3" id="seat_45" value="45"></div>
                <div class="seat m-3" id="seat_46" value="46"></div>
                <div class="seat m-3" id="seat_47" value="47"></div>
                <div class="seat m-3" id="seat_48" value="48"></div>
            </div>
        </div>

        <button class="btn btn-success btn-block" id="booked">Booked</button>
    </div>

    <!-- </div> -->
    <div id="output">

    </div>
    <script src=" https://code.jquery.com/jquery-3.5.1.min.js"
        integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous">
        </script>
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
        integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
        crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
        integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
        integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
        crossorigin="anonymous"></script>
    <script>
        $(document).ready(function () {


            checkSeat();
            //     let arr_2 = [];
            let tt = document.getElementById("tt");
            //     console.log(tt.value == 100);
            //     //checking data of local storage i.e booked

            //array is declared globally
            //     //onclick seat function 
            $(".seat").click(function () {
                let seat = $(".seat");
                //class is toggled here
                $(this).toggleClass("bg-success");
                //its price is given here 
                // price();
                if (tt.value == 100) {
                    let div = document.querySelectorAll(".bg-success");
                    console.log(div);
                    let finalPrice = parseInt(div.length) * 100;
                    $("#output").html(`<h4>Seats selected are ${div.length} and price is=${finalPrice}</h4>`);
                }
                else if (tt.value == 150) {
                    let div = document.querySelectorAll(".bg-success");
                    console.log(div);
                    let finalPrice = parseInt(div.length) * 150;
                    $("#output").html(`<h4>Seats selected are ${div.length} and price is=${finalPrice}</h4>`);
                }
                if (tt.value == 200) {
                    let div = document.querySelectorAll(".bg-success");
                    console.log(div);
                    let finalPrice = parseInt(div.length) * 200;
                    $("#output").html(`<h4>Seats selected are ${div.length} and price is=${finalPrice}</h4>`);
                }
            });
            //on booked function



            function checkSeat(val) {
                console.log("sds");
                console.log(val);
                console.log(`selected_${val}`);
                let data = JSON.parse(localStorage.getItem(`selected_${val}`));
                console.log("bnnn");
                if (data !== null) {
                    console.log(data);
                    for (let i = 0; i < data.length; i++) {
                        document.getElementById(`${data[i]}`).classList.add("bg-danger");
                    }
                }
            }
            function booked(val) {
                let arrId_100 = [];
                let arrId_150 = [];
                let arrId_200 = [];
                let data = JSON.parse(localStorage.getItem(`selected_${val}`));
                //selected is are checked
                // if()
                let div = document.querySelectorAll(".bg-success");
                //selected seats are transferred to localstorage
                for (let i = 0; i < div.length; i++) {
                    console.log(`arrId_150` == `arrId_${val}`);
                    if ("arrId_100" == `arrId_${val}`) {

                        console.log(`arrId_${val}`);
                        arrId_100.push(div[i].id);
                        // console.log(arrname)    ;
                        if (data !== null) {
                            console.log("arrname");
                            // console.log(arrname);
                            console.log("data");
                            // console.log(data);

                            let result = data.concat(arrId_100);
                            console.log("result");
                            console.log(result);

                            $("#" + div[i].id).removeClass("bg-success");
                            $("#" + div[i].id).addClass("bg-danger");
                            localStorage.setItem(`selected_${val}`, JSON.stringify(result));
                        }
                        else {
                            $("#" + div[i].id).removeClass("bg-success");
                            $("#" + div[i].id).addClass("bg-danger");
                            localStorage.setItem(`selected_${val}`, JSON.stringify(arrId_100));
                        }
                    }
                    else if ("arrId_150" == `arrId_${val}`) {

                        console.log(`arrId_${val}`);
                        arrId_150.push(div[i].id);
                        // console.log(arrname);
                        if (data !== null) {
                            console.log("arrname");
                            // console.log(arrname);
                            console.log("data");
                            console.log(data);

                            let result = data.concat(arrId_150);
                            console.log("result");
                            console.log(result);

                            $("#" + div[i].id).removeClass("bg-success");
                            $("#" + div[i].id).addClass("bg-danger");
                            localStorage.setItem(`selected_${val}`, JSON.stringify(result));
                        }
                        else {
                            $("#" + div[i].id).removeClass("bg-success");
                            $("#" + div[i].id).addClass("bg-danger");
                            localStorage.setItem(`selected_${val}`, JSON.stringify(arrId_150));
                        }
                    }
                    else if ("arrId_200" == `arrId_${val}`) {
                        console.log("arrId_200" == `arrId_${val}`);

                        console.log(`arrId_${val}`);
                        arrId_200.push(div[i].id);
                        // console.log(arrname);
                        if (data !== null) {
                            console.log("arrname");
                            // console.log(arrname);
                            console.log("data");
                            console.log(data);

                            let result = data.concat(arrId_200);
                            console.log("result");
                            console.log(result);

                            $("#" + div[i].id).removeClass("bg-success");
                            $("#" + div[i].id).addClass("bg-danger");
                            localStorage.setItem(`selected_${val}`, JSON.stringify(result));
                        }
                        else {
                            $("#" + div[i].id).removeClass("bg-success");
                            $("#" + div[i].id).addClass("bg-danger");
                            localStorage.setItem(`selected_${val}`, JSON.stringify(arrId_200));
                        }
                    }
                }
            }
            function clear() {
                $(".seat").removeClass("bg-success").removeClass("bg-danger");
            }
            checkMovie();
            tt.addEventListener("change", function () {
                console.log(tt.value);
                checkMovie();
            })
            function checkMovie() {
                switch (tt.value) {
                    case "100":
                        console.log("ok 100");
                        let checkStorage = localStorage.getItem("selected_100");
                        if (checkStorage == null) {
                            clear();
                        }
                        else {

                            clear();
                            checkSeat("100");

                            console.log(checkStorage);
                        }
                        $("#booked").click(function () {
                            booked(tt.value);
                        });
                        break;
                    case "150":
                        console.log("ok 150");
                        let checkStorage_1 = localStorage.getItem("selected_150");
                        console.log(checkStorage_1);
                        if (checkStorage_1 == null) {
                            clear();
                        }
                        else {

                            clear(); checkSeat("150");

                            console.log(checkStorage_1);
                        }
                        $("#booked").click(function () {
                            booked(tt.value);
                        });

                        break;
                    case "200":

                        let checkStorage_2 = localStorage.getItem("selected_200");
                        if (checkStorage_2 == null) {
                            clear();
                        }
                        else {

                            clear(); checkSeat("200");
                            console.log(checkStorage_2);
                        }
                        $("#booked").click(function () {
                            booked(tt.value);
                        });
                }
            }
            // tt.addEventListener("change", function () {
            //     console.log(tt.value == 150);
            //     if (tt.value == 150) {
            //         $(".seat").removeClass("bg-success").removeClass("bg-danger");
            //         let div_1 = document.querySelectorAll(".bg-success");
            //         console.clear();
            //         cons ole.log(div_1);
            //         let data_1 = localStorage.getItem("selected_1");

            //         for (let i = 0; i < div_1.length; i++) {
            //             arr_2.push(div[i].id);
            //             if (data_1 !== null) {
            //                 let result_1 = data_1.concat(arr_2);
            //                 $("#" + div_1[i].id).removeClass("bg-success");
            //                 $("#" + div_1[i].id).addClass("bg-danger");
            //                 localStorage.setItem("selected_1", JSON.stringify(result_1));
            //             }
            //             else {
            //                 $("#" + div_1[i].id).removeClass("bg-success");
            //                 $("#" + div_1[i].id).addClass("bg-danger");
            //                 localStorage.setItem("selected_1", JSON.stringify(arr_2));
            //             }
            //         }
            //     }
            // });
        });
    </script>
</body>

</html>